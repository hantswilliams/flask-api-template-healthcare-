{% extends "base.html" %}

{% block title %}
    Welcome
{% endblock %}

{% block content %}

    <div class="container mx-auto p-8">

        <div class="bg-white p-5 rounded shadow-sm">
            <h2 class="font-bold text-xl mb-4">User Profile</h2>
            <p>Username: <span class="text-gray-700">{{ username }}</span></p>
            <p>User ID: <span class="text-gray-700">{{ userid }}</span></p>
        </div>

        {% if user_permissions %}
            <div class="mt-8">
                <div class="bg-white p-5 rounded shadow-sm">
                    <h3 class="font-bold text-xl mb-4">Your Permissions (Access) </h3>
                    <table class="min-w-full leading-normal">
                        <thead>
                            <tr>
                                <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                    Object Type
                                </th>
                                <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                    Object Route
                                </th>
                                <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                                    Object Method
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for permission in user_permissions %}
                                <tr>
                                    <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                        {% if permission.object.startswith('/api') %}
                                            <span class="inline-block bg-blue-500 text-white text-sm font-semibold px-4 py-1 rounded-full">API Endpoint</span>
                                        {% else %}
                                            <span class="inline-block bg-gray-400 text-white text-sm font-semibold px-4 py-1 rounded-full">Web Page</span>
                                        {% endif %}
                                    </td>
                                    <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                        <p class="text-gray-900 whitespace-no-wrap">{{ permission.object }}</p>
                                    </td>
                                    <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                        <p class="text-gray-900 whitespace-no-wrap">{{ permission.action }}</p>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        {% endif %}
        <div class="mt-8">
            <div class="bg-white p-5 rounded shadow-sm">
                <h3 class="font-bold text-xl mb-4">Quick Links</h3>
                <div class="space-y-2">
                    <a href="/profile" class="text-blue-500 hover:text-blue-700">User Profile</a><br>
                    <a href="/manage-permissions" class="text-blue-500 hover:text-blue-700">Manage Permissions</a><br>
                    <a href="/swagger" class="text-blue-500 hover:text-blue-700">API Documentation: Swagger</a><br>
                    <a href="/redoc" class="text-blue-500 hover:text-blue-700">API Documentation: ReDoc</a><br>
                    <a href="/register/admin/2fa/setup" class="text-blue-500 hover:text-blue-700">Update 2FA</a><br>
                    <a href="/change_password" class="text-blue-500 hover:text-blue-700">Change Password</a><br>
                    <a href="/api-token" class="text-blue-500 hover:text-blue-700">View or Reset Your API Token</a><br>
                    <a href="/session-time" class="text-blue-500 hover:text-blue-700">Session Time</a><br>
                    <a href="/logout" class="text-blue-500 hover:text-blue-700">Logout</a><br>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

